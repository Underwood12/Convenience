<nz-card [nzSize]="'small'">
    <form nz-form [nzLayout]="'inline'" [formGroup]="searchForm" (ngSubmit)="submitSearch()">
        <nz-form-item class="mb-5">
            <nz-form-label [nzFor]="'title'">标题</nz-form-label>
            <nz-form-control>
                <input nz-input placeholder="标题" [formControlName]="'title'" [attr.id]="'title'" autocomplete="off" />
            </nz-form-control>
        </nz-form-item>
        <nz-form-item class="mb-5">
            <nz-form-label [nzFor]="'tag'">标签</nz-form-label>
            <nz-form-control>
                <input nz-input placeholder="标签" [formControlName]="'tag'" [attr.id]="'tag'" autocomplete="off" />
            </nz-form-control>
        </nz-form-item>
        <nz-form-item class="mb-5">
            <nz-form-label [nzFor]="'columnId'">栏目</nz-form-label>
            <nz-form-control>
                <nz-select style="width: 150px;" nzAllowClear nzPlaceHolder="请选择" [attr.id]="'columnId'"
                    [formControlName]="'columnId'">
                    <nz-option *ngFor="let column of columns" [nzValue]="column.id" [nzLabel]="column.name"></nz-option>
                </nz-select>
            </nz-form-control>
        </nz-form-item>
        <nz-form-item>
            <nz-form-control>
                <button nz-button nzType="primary">搜索</button>
            </nz-form-control>
        </nz-form-item>
    </form>
</nz-card>

<nz-card [nzSize]="'small'" class="fullwindow">
    <div>
        <button nz-button class="mr-10" (click)="add()" *canOperate="'addArticleBtn'">
            <i nz-icon nzType="plus"></i>添加文章</button>
        <button nz-button class="mr-10" (click)="refresh()"><i nz-icon nzType="sync"></i>刷新数据</button>
    </div>
    <div class="mt-10">
        <nz-table #dataTable nzSize="middle" [nzData]="data" nzShowPagination="false" nzFrontPagination="false"
            nzBordered="true">
            <thead>
                <tr>
                    <th nzAlign="center" nzWidth="50px">#</th>
                    <th nzAlign="center" nzWidth="120px">栏目</th>
                    <th nzAlign="center">标题</th>
                    <th nzAlign="center" nzWidth="200px">标签</th>
                    <th nzAlign="center" nzWidth="180px">创建时间</th>
                    <th nzAlign="center" nzWidth="180px">排序</th>
                    <th nzAlign="center" nzWidth="120px">操作</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let data of dataTable.data;let i = index">
                    <td nzAlign="center">{{ i + 1 + (page - 1) * size }}</td>
                    <td nzAlign="center">{{ data.columnName }}</td>
                    <td nzAlign="center">{{ data.title }}</td>
                    <td nzAlign="center">{{ data.tags }}</td>
                    <td nzAlign="center">{{ data.createTime | date: 'yyyy-MM-dd HH:mm:ss'}}</td>
                    <td nzAlign="center">{{ data.sort }}</td>
                    <td nzAlign="center">
                        <button nz-button nzType="default" nzShape="circle" *canOperate="'updateArticleBtn'"
                            (click)="edit(data.id)" class="mr-10"><i nz-icon nzType="edit"></i></button>
                        <button nz-button nzType="default" nzShape="circle" *canOperate="'deleteArticleBtn'"
                            (click)="remove(data.id)" class="mr-10"><i nz-icon nzType="delete"></i></button>
                    </td>
                </tr>
            </tbody>
        </nz-table>
    </div>
    <div class="mt-10">
        <nz-pagination [(nzPageSize)]="size" [(nzPageIndex)]="page" [nzTotal]="total" nzShowSizeChanger
            nzShowQuickJumper (nzPageIndexChange)="pageChange()" (nzPageSizeChange)="sizeChange()"></nz-pagination>
    </div>
</nz-card>

<ng-template #contentTpl>
    <form nz-form [formGroup]="editForm" (ngSubmit)="submitEdit()">
        <nz-form-item>
            <nz-form-label nzRequired [nzSm]="6" [nzXs]="24" [nzFor]="'edit_title'">文章标题</nz-form-label>
            <nz-form-control [nzSm]="14" [nzXs]="24" [nzErrorTip]="titleErrorTpl">
                <input [attr.id]="'edit_title'" formControlName="title" nz-input placeholder="文章标题"
                    autocomplete="off" />
            </nz-form-control>
            <ng-template #titleErrorTpl let-control>
                <ng-container *ngIf="control.hasError('required')">
                    请输入用户名！
                </ng-container>
                <ng-container *ngIf="control.hasError('maxlength')">
                    角色名长度不能超过50！
                </ng-container>
            </ng-template>
        </nz-form-item>
        <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" [nzFor]="'edit_subTitle'">副标题</nz-form-label>
            <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="副标题长度不能超过10！">
                <input [attr.id]="'edit_subTitle'" formControlName="subTitle" nz-input placeholder="副标题"
                    autocomplete="off" />
            </nz-form-control>
        </nz-form-item>
        <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" [nzFor]="'edit_columnId'">栏目</nz-form-label>
            <nz-form-control [nzSm]="14" [nzXs]="24">
                <nz-select nzAllowClear nzPlaceHolder="请选择" [attr.id]="'edit_columnId'" formControlName="columnId">
                    <nz-option *ngFor="let column of columns" [nzValue]="column.id" [nzLabel]="column.name"></nz-option>
                </nz-select>
            </nz-form-control>
        </nz-form-item>
        <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" [nzFor]="'edit_source'">来源</nz-form-label>
            <nz-form-control [nzSm]="14" [nzXs]="24" [nzErrorTip]="'来源长度不能超过200！'">
                <input [attr.id]="'edit_source'" formControlName="source" nz-input placeholder="来源"
                    autocomplete="off" />
            </nz-form-control>
        </nz-form-item>
        <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" [nzFor]="'edit_sort'">排序</nz-form-label>
            <nz-form-control [nzSm]="14" [nzXs]="24">
                <input [attr.id]="'edit_sort'" formControlName="sort" nz-input placeholder="排序" autocomplete="off" />
            </nz-form-control>
        </nz-form-item>
        <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" [nzFor]="'edit_tags'">标签</nz-form-label>
            <nz-form-control [nzSm]="14" [nzXs]="24" [nzErrorTip]="'标签长度不能超过200！'">
                <input [attr.id]="'edit_tags'" formControlName="tags" nz-input placeholder="标签" autocomplete="off" />
            </nz-form-control>
        </nz-form-item>
        <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" [nzFor]="'edit_content'">内容</nz-form-label>
            <nz-form-control [nzSm]="14" [nzXs]="24">
                <input [attr.id]="'edit_content'" formControlName="content" nz-input placeholder="内容"
                    autocomplete="off" />
            </nz-form-control>
        </nz-form-item>
        <nz-form-item>
            <nz-form-control [nzSpan]="14" [nzOffset]="6">
                <button nz-button nzType="primary" class="mr-10">提交</button>
                <button nz-button type="reset" (click)="cancel()">取消</button>
            </nz-form-control>
        </nz-form-item>
    </form>
</ng-template>