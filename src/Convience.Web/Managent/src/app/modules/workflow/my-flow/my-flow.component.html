<nz-card [nzSize]="'small'" class="mt-10 full-single">
    <div>
        <button nz-button class="mr-10" (click)="add()" *canOperate="'addWorkFlowBtn'"><i nz-icon
                nzType="plus"></i>发起工作流</button>
        <button nz-button class="mr-10" (click)="refresh()"><i nz-icon nzType="sync"></i>刷新数据</button>
    </div>
    <div class="mt-10">
        <nz-table #dataTable nzSize="middle" [nzData]="data" nzShowPagination="false" nzFrontPagination="false"
            nzBordered="true">
            <thead>
                <tr>
                    <th nzAlign="center" nzWidth="100px">#</th>
                    <th nzAlign="center">工作流</th>
                    <th nzAlign="center" nzWidth="200px">当前状态</th>
                    <th nzAlign="center" nzWidth="200px">发起时间</th>
                    <th nzAlign="center" nzWidth="200px">操作</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let data of dataTable.data;let i = index;">
                    <td nzAlign="center">{{ i + 1 + (page - 1) * size }}</td>
                    <td nzAlign="center">{{ data.workFlowName }}</td>
                    <td nzAlign="center">{{ data.workFlowInstanceState }}</td>
                    <td nzAlign="center">{{ data.createdTime }}</td>
                    <td nzAlign="center">
                        <button nz-button nzType="default" nzShape="circle" *canOperate="'updateWorkFlowBtn'"
                            (click)="edit(data.id)" class="mr-10">
                            <i nz-icon nzType="edit"></i>
                        </button>
                        <button nz-button nzType="default" nzShape="circle" (click)="remove(data.id)"
                            *canOperate="'deleteWorkFlowBtn'">
                            <i nz-icon nzType="delete"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </nz-table>
    </div>
    <div class="mt-10">
        <nz-pagination [(nzPageSize)]="size" [(nzPageIndex)]="page" [nzTotal]="total" nzShowSizeChanger
            nzShowQuickJumper (nzPageIndexChange)="pageChange()" (nzPageSizeChange)="sizeChange()"></nz-pagination>
    </div>
</nz-card>

<ng-template #contentTpl>
    <div class="content">
        <div class="left">
            <nz-card [nzSize]="'small'">
                <app-workflow-group-tree #tree (nodeChecked)="nodeChecked($event)">
                </app-workflow-group-tree>
            </nz-card>
        </div>
        <div class="right">
            <nz-card [nzSize]="'small'">
                <div class="mt-10">
                    <nz-table #dataTable nzSize="middle" [nzData]="wfdata" nzShowPagination="false"
                        nzFrontPagination="false" nzBordered="true">
                        <thead>
                            <tr>
                                <th nzAlign="center" nzWidth="50px">#</th>
                                <th nzAlign="center" nzWidth="120px">名称</th>
                                <th nzAlign="center">描述</th>
                                <th nzAlign="center" nzWidth="180px">创建时间</th>
                                <th nzAlign="center" nzWidth="140px">创建人员</th>
                                <th nzAlign="center" nzWidth="180px">修改时间</th>
                                <th nzAlign="center" nzWidth="140px">修改人员</th>
                                <th nzAlign="center" nzWidth="200px">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let data of dataTable.data;let i = index">
                                <td nzAlign="center">{{ i + 1 + (page - 1) * size }}</td>
                                <td nzAlign="center">{{ data.name }}</td>
                                <td nzAlign="center">{{ data.describe }}</td>
                                <td nzAlign="center">{{ data.createdTime | date: 'yyyy-MM-dd HH:mm:ss'}}</td>
                                <td nzAlign="center">{{ data.createdUser }}</td>
                                <td nzAlign="center">{{ data.updatedTime | date: 'yyyy-MM-dd HH:mm:ss'}}</td>
                                <td nzAlign="center">{{ data.updatedUser }}</td>
                                <td nzAlign="center">
                                    <button nz-button nzTooltipTitle="发起流程" nzTooltipPlacement="top" nz-tooltip
                                        nzType="default" nzShape="circle" *canOperate="'editWorkflowFlowBtn'"
                                        (click)="startFlow(data.id)" class="mr-10"><i nz-icon
                                            nzType="send"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </nz-table>
                </div>
                <div class="mt-10">
                    <nz-pagination [(nzPageSize)]="wfsize" [(nzPageIndex)]="wfpage" [nzTotal]="wftotal"
                        nzShowSizeChanger nzShowQuickJumper (nzPageIndexChange)="wfPageChange()"
                        (nzPageSizeChange)="wfSizeChange()">
                    </nz-pagination>
                </div>
            </nz-card>
        </div>
    </div>
</ng-template>